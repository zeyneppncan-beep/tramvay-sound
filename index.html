<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Tramvay YolculuÄŸu</title>
  <iframe
  src="https://sketchfab.com/models/35d9707a712d4da1a88d1e4f82da8797/embed"
  width="100%"
  height="100%"
  allow="autoplay; fullscreen; xr-spatial-tracking"
  allowfullscreen
></iframe>
  <script src="https://static.sketchfab.com/api/sketchfab-viewer-1.13.0.js"></script>
  <style>
    html, body { margin:0; height:100%; overflow:hidden; }
    #viewer { width:100%; height:100%; }
    #start {
      position: absolute;
      z-index: 10;
      top: 20px;
      left: 20px;
      padding: 12px 18px;
      background: black;
      color: white;
      border: none;
      font-size: 14px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<button id="start">ðŸ”Š Sesleri BaÅŸlat</button>
<div id="viewer"></div>

<script>
let audioEnabled = false;

const sounds = [
  new Audio('sounds/trafik.mp3'),
  new Audio('sounds/ic_konusma.mp3'),
  new Audio('sounds/tramvay_ray.mp3'),
  new Audio('sounds/kapi.mp3'),
  new Audio('sounds/marti.mp3'),
  new Audio('sounds/nefes.mp3')
];

sounds.forEach(s => {
  s.loop = true;
  s.volume = 0.6;
});

function stopAll() {
  sounds.forEach(s => {
    s.pause();
    s.currentTime = 0;
  });
}

document.getElementById('start').addEventListener('click', () => {
  audioEnabled = true;
  document.getElementById('start').style.display = 'none';
});

const iframe = document.getElementById('viewer');
const client = new Sketchfab('1.13.0', iframe);

client.init('35d9707a712d4da1a88d1e4f82da8797', {
  autostart: 1,
  ui_infos: 0,
  success: function(api) {
    api.start();
    api.addEventListener('annotationFocus', function(index) {
      if (!audioEnabled) return;
      stopAll();
      if (sounds[index]) sounds[index].play();
    });
  }
});
</script>

</body>
</html>

